p8105\_hw2\_smi2112
================

Problem 1
---------

Read and clean the data:

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------------------------------------------------------------------------------------------ tidyverse 1.2.1 --

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts --------------------------------------------------------------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
transit_data = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
  mutate(entry = if_else(entry == "YES", TRUE, FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

Short paragraph:

... these data are not tidy yet ...........

Number of distinct stations: 465

``` r
transit_data %>% 
  select(line, station_name) %>% 
  n_distinct()
```

    ## [1] 465

Number of ADA compliant stations: 84

``` r
transit_data %>%
  select(line, station_name, ada) %>% 
  group_by(line, station_name) %>% 
  filter(ada == TRUE) %>% 
  n_distinct()
```

    ## [1] 84

Proportion of station entrances/exits without vending allowed entrace: 0.0980

``` r
38.7
```

    ## [1] 38.7

``` r
prop.table(table(transit_data$vending))*100
```

    ## 
    ##        NO       YES 
    ##  9.796574 90.203426

Reformat data:

``` r
transit_data_tidy = gather(transit_data, key = route_number, value = route_name, route1:route11) %>% 
  mutate(route_number = recode(route_number, 
                               "route1" = 1, 
                               "route2" = 2, 
                               "route3" = 3,
                               "route4" = 4, 
                               "route5" = 5, 
                               "route6" = 6, 
                               "route7" = 7, 
                               "route8" = 8, 
                               "route9" = 9, 
                               "route10" = 10, 
                               "route11" = 11)) 

is.numeric(transit_data_tidy$route_number)
```

    ## [1] TRUE

``` r
is.character(transit_data_tidy$route_name)
```

    ## [1] TRUE

Number of distinct stations serving the A train: 60

``` r
transit_data_tidy %>%
  select(line, station_name, route_name) %>% 
  filter(route_name == "A") %>% 
  n_distinct()
```

    ## [1] 60

Number of distinct stations serving the A train that are ADA compliant: 17

``` r
transit_data_tidy %>%
  select(line, station_name, route_name, ada) %>% 
  filter(route_name == "A" & ada == TRUE) %>% 
  n_distinct()
```

    ## [1] 17

Problem 2
---------

Reading and cleaning the Mr. Trash Wheel sheet:

``` r
library(readxl)

transit_data = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", "Mr. Trash Wheel", range = cell_cols("A:M")) %>%
  janitor::clean_names()

round(transit_data$sports_balls) %>% 
  as.integer(transit_data$sports_balls)
```

    ##   [1]    7    5    6    6    7    5    3    6   46    6    7    6    8    6
    ##  [15]    6    6    6    5   56    6    6    7    6    6    6    5   42    6
    ##  [29]    7    8    7    4   32    7    3    6   16    6    6    7    6    6
    ##  [43]   31    6    7    6    6   25    7    6    6   19    7    6    5   18
    ##  [57]    3    3    8   16   14   38   13   16    8    5    8   11    7    6
    ##  [71]   74    8   22   28   19   32   24  133   26   36   24    9   16   22
    ##  [85]   17   13   14   21   15   13   18   16   22   32   18   21   34   19
    ##  [99]   14  420   22   16   25   27   18   20  128   17   56   32   22    6
    ## [113]    3  136   17   13   12    7    8   57   16   23   33   72   27   27
    ## [127]   15   21    9   13   22   17   27    8  132   17   17   14   21   26
    ## [141]    6    4   16   87   24   23   18   46   38  149   24   36   42   23
    ## [155]   34  159   38   26   32   96   43   38   24   35   26   29  195   31
    ## [169]   28   34   26   38   25   16   24  222   15   31   22   28   32  128
    ## [183]   15   28   33   76   11   37   48   22   11   34   67    6   24   20
    ## [197]   15   65   22   22   19   12   31   14   18   10    6   48    8    8
    ## [211]    5    3    5    7    2    7    3    4    5    8   10    5    7    5
    ## [225]    8   10  110   11   14   12    8    5    9    5   14   78   12    8
    ## [239]    7   27   18   11   22   13   21   85   14    9    6   13   11    6
    ## [253]    8    5   72    6   12   18    8    7   15   13   11   24   12    8
    ## [267]   20    6    4    6   12   14    5    4    8    3   62    7   10   17
    ## [281]   12    1    4    2    4    3    4    3    4    2    5    1    3    2
    ## [295]    4    2    3   59    4    5    3    2    3    0    2    3    2    1
    ## [309]    2   27    5    4    3    2    4    2    8    3    2    2   35    3
    ## [323]    1    5    3    1    2    7    4    5    1    7    2    3   44 3609

Reading and cleaning the precipitation data for 2016 and 2017:
